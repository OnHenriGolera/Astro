@startuml

' !define primary_key(x) <b><color:#b8861b><&key></color> x</b>
' !define foreign_key(x) <color:#aaaaaa><&key></color> x
' !define column(x) <color:#efefef><&media-record></color> x

!define primary_key(name, type) <b><color:#b8861b><&key></color> <u>name</u> : <color:#e76f51><i>type</i></color></b>
!define foreign_key(name, type) <color:#aaaaaa><&key></color> name : <color:#e76f51><i>type</i></color>
!define column(name, type) <color:#efefef><&media-record></color> name : <color:#e76f51><i>type</i></color>
!define table(x) entity x << (T, white) >>

hide methods

skinparam class {
    BackgroundColor edede9
    ArrowColor #aaaaaa
    BorderColor #aaaaaa
    BackgroundColor<< (T, white) >> #aaaaaa
}

table(Person) {
    primary_key(Id, Int)
    column(Name, String)
    column(Surname, String)
}

table(User) {
    primary_key(UserId, Int)
    foreign_key(PersonId, Int)
    foreign_key(RoleId, Int)
    column(Password, String)
}

table(Role) {
    primary_key(Id, Int)
    column(Name, String)
    column(AccessLevel, Int)
}

table(Stage) {
    primary_key(Id, Int)
    foreign_key(FormulaElementId, Int)
    column(Name, String)
}

table(StageList) {
	foreign_key(StageId, Int)
	foreign_key(CompetitionId, Int)
}

table(ParticipantList) {
	foreign_key(ParticipantId, Int)
	foreign_key(StageId, Int)
}

table(Competition) {
    primary_key(Id, Int)
    foreign_key(FormulaId, Int)
    column(Name, String)
    column(Status, String)
    column(Category, String)
}

table(Formula) {
    primary_key(Id, Int)
    column(Name, String)
    column(Description, String)
}

table(FormulaElementList) {
	foreign_key(FormulaId, Int)
	foreign_key(FormulaElementId, Int)
}

table(FormulaElement) {
    primary_key(Id, Int)
    column(Type, String)
    column(NumberBefore, Int)
    column(NumberAfter, Int)
    column(Description, String)
}

table(Participant) {
    primary_key(ParticipantId, Int)
    foreign_key(PersonId, Int)
    column(Category, String)
	column(Present, Boolean)
}

User --> Person
Stage --> FormulaElement
Competition --> Formula
StageList --> Stage
Stage <-- ParticipantList
ParticipantList --> Participant
Formula <-- FormulaElementList
FormulaElementList --> FormulaElement
Participant --> Person
User --> Role
StageList --> Competition

@enduml